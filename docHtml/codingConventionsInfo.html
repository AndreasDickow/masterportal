<h1>Additional information on the coding conventions</h1>
<p>Explanations and examples are given for some points mentioned in the <a href="./codingConventions.md">coding conventions</a> below.</p>
<hr>
<h3>Section A</h3>
<h4>A.1.6</h4>
<p>Babel currently does not translate TPL files.</p>
<hr>
<h4>A.4.3</h4>
<p>These two examples illustrate how to write JSDoc comment blocks.</p>
<pre><code class="language-js">/**
* This function does some things that are explained right here.
* @returns {Void}
*/
functionWithoutParamsAndNoReturn: function () {
    ...
}
</code></pre>
<pre><code class="language-js">/**
* This function does some things that are explained right here.
* @param {String} param1 InputString.
* @returns {String} ConcatenatedString
*/
functionWithParamsAndReturn: function (param1) {
    return param1 + &quot;foobar&quot;;
}
</code></pre>
<hr>
<h4>A.4.4</h4>
<p><em>Example for the <code>initialize()</code> function:</em></p>
<pre><code class="language-js">defaults: {
    channel: Radio.channel(&quot;Alert&quot;),
    category: &quot;alert-info&quot;,
    isDismissable: true,
    isConfirmable: false,
    position: &quot;top-center&quot;,
    message: &quot;&quot;,
    animation: false
},

/**
 * @class AlertingModel
 * @extends Backbone.Model
 * @memberof Alerting
 * @constructs
 * @property {Radio.channel} channel=Radio.channel(&quot;Alert&quot;) Radio channel for communication
 * @property {String} category=&quot;alert-info&quot; Category of alert. bootstrap css class
 * @property {Boolean} isDismissable=true Flag if alert has a dismissable button
 * @property {Boolean} isConfirmable=false Flag if alert has to be confirmed to close
 * @property {String} position=&quot;top-center&quot; The positioning of the alert. Possible values &quot;top-center&quot;, &quot;center-center&quot;
 * @property {String} message=&quot;&quot; The message of the alert
 * @property {Boolean} animation=false Flag if Alert is animated by means of fading out
 * @fires Alerting#render
 * @fires Alerting#changePosition
 * @listens Alerting#RadioTriggerAlertAlert
 */
initialize: function () {
    this.listenTo(this.get(&quot;channel&quot;), {
        &quot;alert&quot;: this.setParams
    }, this);
},
</code></pre>
<p><em>Example for template instantiation:</em></p>
<pre><code class="language-js">/**
 * @member AlertingTemplate
 * @description Template used to create the alert message
 * @memberof Alerting
 */
template: _.template(AlertingTemplate),
</code></pre>
<hr>
<h4>A.4.5</h4>
<p><em>Comment on inheritance:</em></p>
<pre><code class="language-js">    const AlertingModel = Backbone.Model.extend(/** @lends AlertingModel.prototype */{
</code></pre>
<hr>
<h4>A.4.6</h4>
<p>Namespace definition.</p>
<p><em>Example namespace Alerting in Root:</em></p>
<pre><code class="language-js">/**
 * @namespace Alerting
 * @description Alerting system that responds to given events.
 * Used to have the same alert all over the portal.
 */
</code></pre>
<p><em>Example namespace ModelList as Core subfolder:</em></p>
<pre><code class="language-js">/**
 * @namespace ModelList
 * @memberof Core
 * @description List module to gather all item models
 */
</code></pre>
<p><em>Example nested namespace:</em></p>
<pre><code class="language-js">/**
 * @event Core.ModelList.Layer#changeIsSelected
 * @param {Backbone.Model} model The model whose attribute hat changed.
 * @param {Boolean} value The attribute value that has changed.
 * @description Fired if attribute isSelected has changed
 */
</code></pre>
<p><em>Example module namespace with event of namespace Alerting:</em></p>
<pre><code class="language-js">/**
 * @event Alerting#RadioTriggerAlertAlert
 * @param {String/Object} alert The alert object or string needed to create the alert.
 * @example Radio.trigger(&quot;Alert&quot;, &quot;alert&quot;, alert)
 */
</code></pre>
<hr>
<h4>A.4.7</h4>
<p>Event definition.</p>
<p><em>Example: <code>Radio.trigger(&quot;Channel&quot;, &quot;Event&quot;);</code></em></p>
<pre><code class="language-js">/**
 * @event Namespace#RadioTriggerChannelEvent
 * @description FooBar.
 * @example Radio.trigger(&quot;Channel&quot;, &quot;Event&quot;)
 */
</code></pre>
<p><em>Example: <code>Radio.trigger(&quot;Channel&quot;, &quot;EventWithData&quot;, data);</code></em></p>
<pre><code class="language-js">/**
 * @event Namespace#RadioTriggerChannelEventWithData
 * @description FooBar.
 * @param {*} data Data to be sent with the event
 * @example Radio.trigger(&quot;Channel&quot;, &quot;Event&quot;, data)
 */
</code></pre>
<p><em>Example: <code>Radio.request(&quot;Channel&quot;, &quot;Event&quot;);</code></em></p>
<pre><code class="language-js">/**
 * @event Namespace#RadioRequestChannelEvent
 * @description FooBar.
 * @returns {*} - Response of this event
 * @example Radio.request(&quot;Channel&quot;, &quot;Event&quot;)
 */
</code></pre>
<p><em>Example: <code>Radio.request(&quot;Channel&quot;, &quot;EventWithData&quot;, data);</code></em></p>
<pre><code class="language-js">/**
 * @event Namespace#RadioRequestChannelEventWithData
 * @description FooBar.
 * @param {*} data Data to be sent with the event
 * @returns {*} - Response of this evennt
 * @example Radio.request(&quot;Channel&quot;, &quot;Event&quot;, data)
 */
</code></pre>
<p><em>Example: <code>Model.trigger(&quot;myTrigger&quot;);</code></em></p>
<pre><code class="language-js">/**
 * @event Namespace#MyTrigger
 * @description FooBar.
 */
</code></pre>
<p><em>Example: <code>Model.trigger(&quot;myTriggerWithData&quot;, data);</code></em></p>
<pre><code class="language-js">/**
 * @event Namespace#MyTriggerWithData
 * @param {*} data Data to be sent with the event
 * @description FooBar.
 */
</code></pre>
<p><em>Example: <code>this.listenTo(this, { &quot;change:attributeOne&quot;: this.doSomething });</code></em></p>
<pre><code class="language-js">/**
 * @event Namespace#changeAttributeOne
 * @description FooBar.
 */
</code></pre>
<hr>
<h4>A.5.1</h4>
<p>Example for testable and untestable functions.</p>
<pre><code class="language-js">function testableFunction (uebergabeParameter) {
    let rueckgabeParameter = &quot;Hello &quot; + uebergabeParameter;

    return rueckgabeParameter
}

const arr = [];
function untestableFunction (param) {
    setTimeout(() =&gt; {
        arr.push(param);
    }, 1000);
}
</code></pre>
<hr>
<h4>A.5.2</h4>
<p>For more information on unit tests in Vue, refer to <a href="./unitTestVue.md">the Vue unit test documentation</a>.</p>
<p>Tests employ the libraries <strong><a href="https://www.chaijs.com/">Chai</a></strong> and <strong><a href="https://mochajs.org/">Mocha</a></strong>.</p>
<hr>
<h4>A.6.2</h4>
<p>Extend the <code>.md</code> file documentation by following these instructions.</p>
<ul>
<li>For new configuration parameters that do not directly influence the Masterportal UI and displayed layers, or on changes to such existing parameters, extend the file <strong><a href="./config.js.md">config.js.md</a></strong>.</li>
<li>For new configuration parameters regarding the Masterportal UI, or on changes to such existing parameters, extend the <strong><a href="./config.json.md">config.json.md</a></strong>.</li>
<li>The following parameters are mandatory for documenting configuration parameters:
<table>
<thead>
<tr>
<th>Name</th>
<th>Required</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
<th>Expert</th>
</tr>
</thead>
<tbody>
<tr>
<td>The row <code>Expert</code> only applies to the <strong><a href="./config.json.md">config.json.md</a></strong>.</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</li>
<li>Each parameter in a <code>.md</code> file ends on a horizontal separation line produced by e.g. <code>***</code> or <code>---</code>.</li>
<li>The heading to be used depends on the parameter nesting. The top level starts with <code>#</code>, the next level with <code>##</code>, and so on. Please mind that Markdown only supports up to six chapter levels.</li>
<li>Configuration parameters describing an object containing further parameters are modelled in separate chapters and are each linked and described.</li>
<li>For complex configuration parameters, an example configuration is required.</li>
<li>Also extend the files <strong><a href="./services.json.md">services.json.md</a></strong>, <strong><a href="./rest-services.json.md">rest-services.json.md</a></strong>, and <strong><a href="./style.json.md">style.json.md</a></strong>, if you add or change parameters to these global configuration files.</li>
</ul>
<p>For a more formal definition of the <strong><a href="./config.json.md">config.json.md</a></strong> requirements, see <a href="https://bitbucket.org/geowerkstatt-hamburg/mpconfigparser/src/master/README.md">Masterportal configuration parser</a>.</p>
<p><em>Nesting in .json is modeled with the amount of #</em></p>
<pre><code>    # config.json
    .
    .
    .

    ## Portalconfig
</code></pre>
<p><em>Parameters are nested when describing an object themselves:</em></p>
<pre><code>    ## Portalconfig
    |Name|Verpflichtend|Typ|Default|Beschreibung|Expert|
    |----|-------------|---|-------|------------|------|
    |controls|nein|[controls](#markdown-header-portalconfigcontrols)||Description text.|false|
    ***

    ### Portalconfig.controls

</code></pre>
<p><em>Example of a complex configuration</em></p>
<pre><code>    &quot;osm&quot;: {
        &quot;minChars&quot;: 3,
        &quot;serviceId&quot;: &quot;10&quot;,
        &quot;limit&quot;: 60,
        &quot;states&quot;: &quot;Hamburg, Nordrhein-Westfalen, Niedersachsen, Rhineland-Palatinate Rheinland-Pfalz&quot;,
        &quot;classes&quot;: &quot;place,highway,building,shop,historic,leisure,city,county&quot;
    }
</code></pre>
<hr>
<h4>A.6.4</h4>
<p>On changing, refactoring, or deleting a parameter:</p>
<ul>
<li>Note “Deprecated in [next major release]” within the parameter’s documentation.</li>
<li>Mark the old parameter’s code as deprecated by adding “@deprecated in [next major release]” within the JSDoc comment.</li>
</ul>
<p>For example, the following annotations mark the parameter “Baumtyp” within the <code>config.json</code> and code as deprecated:</p>
<pre><code class="language-md">|Name|Verpflichtend|Typ|Default|Beschreibung|Expert|
|----|-------------|---|-------|------------|------|
|Baumtyp|nein|enum[&quot;light&quot;, &quot;default&quot;, &quot;custom&quot;]|&quot;light&quot;|Deprecated in 3.0.0. Use &quot;treeType&quot; instead.|false|
</code></pre>
<pre><code class="language-js">/**
 * this.updateTreeType
 * @deprecated in 3.0.0
 */
attributes = this.updateTreeType(attributes, response);
...
/**
 * Update the preparsed treeType from attributes to be downward compatible.
 * @param {Object} attributes Preparased portalconfig attributes.
 * @param {Object} response  Config from config.json.
 * @returns {Object} - Attributes with mapped treeType
 * @deprecated in 3.0.0. Remove whole function and call!
 */
updateTreeType: function (attributes, response) {
    if (response.Portalconfig.treeType !== undefined) {
        attributes.treeType = response.Portalconfig.treeType;
    }
    else if (response.Portalconfig.Baumtyp !== undefined) {
        attributes.treeType = response.Portalconfig.Baumtyp;
        console.warn(&quot;Attribute 'Baumtyp' is deprecated. Please use 'treeType' instead.&quot;);
    }
    else {
        attributes.treeType = &quot;light&quot;;
    }
    return attributes;
},
</code></pre>
<hr>
<h4>A.7.1</h4>
<p>The library <a href="https://www.i18next.com/">i18next</a> is used for internationalization.</p>
<hr>
<h4>A.8.3</h4>
<p>For more information of versions, read the <a href="./versioning.md">versioning documentation</a>.</p>
<p>For each pull request, add an entry to the chapter “Unreleased” of the <a href="../CHANGELOG.md">CHANGELOG</a> file. Avoid technical jargon. The changelog is supposed to be readable by both users and developers.</p>
<hr>
<h3>Section B (optional)</h3>
<h4>B.3.1</h4>
<pre><code class="language-js">// code example for generating simple getters
import state from &quot;./state&quot;;
import {generateSimpleMutations} from &quot;~generators&quot;;

const mutations = {
    ...generateSimpleMutations(state),
</code></pre>
<hr>
<h4>B.4.2</h4>
<ul>
<li><a href="https://vuex.vuejs.org/guide/state.html#the-mapstate-helper">mapState documentation</a></li>
<li><a href="https://vuex.vuejs.org/guide/getters.html#the-mapgetters-helper">mapGetters documentation</a></li>
<li><a href="https://vuex.vuejs.org/guide/mutations.html#committing-mutations-in-components">mapMutations documentation</a></li>
<li><a href="https://vuex.vuejs.org/guide/actions.html#dispatching-actions-in-components">mapActions documentation</a></li>
</ul>
<hr>
<h4>B.5.4</h4>
<pre><code class="language-html">&lt;style lang=&quot;scss&quot; scoped&gt;
    @import &quot;~variables&quot;;
&lt;/style&gt;
</code></pre>
<hr>
<h4>B.6</h4>
<p>An example simply displaying “My First Alert Message”:</p>
<pre><code class="language-js">import store from &quot;masterportal/src/app-store/index&quot;;
store.dispatch(&quot;Alerting/addSingleAlert&quot;, &quot;My First Alert Message.&quot;);
</code></pre>
<p>On phrasing, please use the following examples as a guideline.</p>
<table>
<thead>
<tr>
<th>Positive example</th>
<th>Negative example</th>
</tr>
</thead>
<tbody>
<tr>
<td>Further information on this topic could not be loaded.</td>
<td>CSW request failed</td>
</tr>
<tr>
<td>Please enter your password</td>
<td>You forgot to enter your password</td>
</tr>
</tbody>
</table>
